<!DOCTYPE html>
<html>
<div id="info">HW3</div>
<script src="https://threejs.org/build/three.min.js"></script>
<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>

<head>	
<title>
</title>
<style>
	#info {
		position: absolute;
		top: 0px;
		width: 100%;
		padding: 10px;
		text-align: center;
		color: #ffff00
	}

	body {
		overflow: hidden;
	}

</style>
</head>
<body>
<script>
	var camera, scene, renderer;
	var walls = new THREE.Group();

	init();
	animate();

	function init() {

		scene = new THREE.Scene();
			
		renderer = new THREE.WebGLRenderer();
		renderer.setSize(window.innerWidth, window.innerHeight);
		renderer.setClearColor(0x888888);
		document.body.appendChild(renderer.domElement);

		camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
		camera.position.set(0, 1000, 800) ; // camera at (0,0,500)
		let controls = new THREE.OrbitControls(camera, renderer.domElement);

		////////////////////////////////////////////////////////
		const light = new THREE.AmbientLight( 0xcccccc );	//環境光 
		scene.add( light );
		
		
		let floortex = new THREE.TextureLoader().load("https://i.imgur.com/5u2yDfR.jpg");
		floortex.wrapS = THREE.RepeatWrapping;
		floortex.wrapT = THREE.RepeatWrapping;
		floortex.repeat.set(6, 9);
		let floormat = new THREE.MeshLambertMaterial({
			map : floortex,
			side : THREE.DoubleSide
		});
		let floor = new THREE.Mesh(new THREE.PlaneGeometry(1000, 1000), floormat);
		floor.rotation.x = Math.PI/2;
		floor.position.y = -0.1;
		
		var chair = buildChair();
		var chair1 = chair.clone();
		chair1.position.set (50, 0, 70);
		var chair2 = chair.clone();
		chair2.position.set (-50, 0, -70);
		chair2.rotation.y = Math.PI/2;
		
		//chairs
		//1
		buildWall(1000, 20);
		walls.children[0].position.set(-490, 75, 0);
		walls.children[0].rotation.z = Math.PI/2;
		//1.2
		buildWall(1000, 20);
		walls.children[1].position.set(0, 75, -490);
		//1.3
		buildWall(1000, 20);
		walls.children[2].position.set(490, 75, 0);
		walls.children[2].rotation.z = Math.PI/2;
		//2
		buildWall(350, 20);
		walls.children[3].position.set(-325, 75, 490);
		//2.2
		buildWall(350, 20);
		walls.children[4].position.set(325, 75, 490);
		//3
		buildWall(180, 5);
		walls.children[5].position.set(0, 75, 257.5);
		//4
		buildWall(200, 20);
		walls.children[6].position.set(-160, 75, 160);
		walls.children[6].rotation.z = Math.PI/2;
		//4.2
		buildWall(200, 20);
		walls.children[7].position.set(160, 75, 160);
		walls.children[7].rotation.z = Math.PI/2;
		//5
		buildWall(300, 60);
		walls.children[8].position.set(310, 75, 170);
		walls.children[8].rotation.z = Math.PI/2;
		//6
		buildWall(370, 20);
		walls.children[9].position.set(205, 75, -30);
		//7
		buildWall(370, 20);
		walls.children[10].position.set(30, 75, -205);
		walls.children[10].rotation.z = Math.PI/2;
		//8
		buildWall(200, 20);
		walls.children[11].position.set(-290, 75, -380);
		walls.children[11].rotation.z = Math.PI/2;
		//8.2
		buildWall(200, 20);
		walls.children[12].position.set(-290, 75, 20);
		walls.children[12].rotation.z = Math.PI/2;
		//8.3
		buildWall(200, 20);
		walls.children[13].position.set(-390, 75, 110);
		
		
		
		scene.add (floor, /*chair1,chair2,*/ walls);
	}
	
	function buildWall(l, w, h){
		let wall = new THREE.Mesh(new THREE.BoxGeometry(l, w, 150), new THREE.MeshLambertMaterial({color : 0xffffff}));
		wall.rotation.x = Math.PI/2;
		walls.add(wall);
	}

	function buildChair() {
		var group = new THREE.Group();
		var woodTex = new THREE.TextureLoader().load("https://i.imgur.com/DrvlmNW.jpg?1");
		var mat = new THREE.MeshLambertMaterial({
			map: woodTex
		});
		var boxTop = new THREE.Mesh(new THREE.BoxGeometry(60, 10, 30), mat);
		var boxLeg1 = new THREE.Mesh(new THREE.BoxGeometry(10, 30, 30), mat);
		var boxLeg2 = new THREE.Mesh(new THREE.BoxGeometry(10, 30, 30), mat);
		boxTop.position.set(0, 25, 0);
		boxLeg1.position.set(-25, 15, 0);
		boxLeg2.position.set(25, 15, 0);
		group.add(boxTop, boxLeg1, boxLeg2);
		return group;
	}

	function animate() {

		requestAnimationFrame(animate);
		renderer.render(scene, camera);

	}
</script>
</body>
</html>
